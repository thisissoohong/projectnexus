<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boarding - Hanwha Style Finance App</title>
    <style>
        /* ====================================
           1. Hanwha Style Color Palette
           ==================================== */
        :root {
            /* í•œí™” ì˜¤ë Œì§€ ê³„ì—´ ë©”ì¸ ì»¬ëŸ¬ */
            --primary-color: #F37321; 
            /* ë³´ì¡° ì»¬ëŸ¬ (ì–´ë‘ìš´ ë°°ê²½ì´ë‚˜ í…ìŠ¤íŠ¸ìš©) */
            --secondary-color: #231F20; 
            --background-color: #F8F9FA;
            --card-background: #FFFFFF;
            --text-color: #222222;
            --sub-text-color: #888888;
            /* í•œí™” ëŠë‚Œì˜ ë”°ëœ»í•œ ê·¸ë¼ë°ì´ì…˜ (ì£¼í™© -> ë…¸ë‘/ë°ì€ ì£¼í™©) */
            --card-gradient: linear-gradient(135deg, #FF9966, #FF5E62); 
            /* íƒ­ë°” í™œì„± ìƒ‰ìƒë„ ì£¼í™©ìƒ‰ìœ¼ë¡œ í†µì¼ */
            --tab-color-active: #F37321;
            /* ë²„íŠ¼ ë°°ê²½ìƒ‰ ë“± */
            --button-bg-soft: #FFF0E6; /* ì•„ì£¼ ì—°í•œ ì£¼í™©ìƒ‰ ë°°ê²½ */
        }

        * { box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            min-height: 100vh;
        }

        /* ====================================
           2. App Shell & Structure
           ==================================== */
        .app-shell {
            max-width: 450px; /* ìŠ¤ë§ˆíŠ¸í° í¬ê¸° */
            margin: 0 auto;
            background-color: var(--card-background);
            min-height: 100vh;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.05);
            position: relative;
            padding-bottom: 70px; /* í•˜ë‹¨ íƒ­ ë°” ê³µê°„ í™•ë³´ */
        }

        .page { display: none; padding: 20px; }
        .page.active { display: block; }
        
        /* ====================================
           3. Top Bar & Header (Minimal)
           ==================================== */
        .topbar {
            display: flex;
            align-items: center;
            justify-content: flex-end; /* ì˜¤ë¥¸ìª½ ì •ë ¬ */
            padding: 20px 20px 0;
        }
        .topbar .profile {
            width: 32px; height: 32px; border-radius: 50%; background-color: #EEEEEE; margin-right: 12px;
            /* ê¸°ë³¸ í”„ë¡œí•„ ì•„ì´ì½˜ (íšŒìƒ‰) */
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23555"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
            background-size: 70%;
        }
        .topbar .pill {
            background: var(--button-bg-soft);
            color: var(--primary-color);
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
        }

        /* ====================================
           4. Card & Balance Area (Home)
           ==================================== */
        .card-container {
            padding: 10px 20px;
        }
        .gradient-card {
            width: 100%;
            height: 200px;
            background: var(--card-gradient);
            border-radius: 20px;
            /* ì£¼í™©ìƒ‰ ê·¸ë¦¼ì */
            box-shadow: 0 10px 25px rgba(243, 115, 33, 0.3); 
            padding: 20px;
            color: white;
            position: relative;
            margin-bottom: 25px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .gradient-card .label { font-size: 14px; font-weight: 600; opacity: 0.9; }
        .gradient-card .card-number { font-size: 18px; font-weight: 600; letter-spacing: 1px; margin-top: 5px; }
        .gradient-card .card-chip {
            width: 35px; height: 25px; background: rgba(255,255,255,0.3); border-radius: 4px; margin-bottom: 10px;
        }
        /* ë§ˆìŠ¤í„°ì¹´ë“œ ë¡œê³  ëŠë‚Œ (ì› 2ê°œ) */
        .card-brand {
            position: absolute; right: 20px; bottom: 20px;
            display: flex;
        }
        .brand-circle {
            width: 24px; height: 24px; border-radius: 50%;
        }
        .brand-circle.red { background-color: #EB001B; opacity: 0.8; }
        .brand-circle.yellow { background-color: #F79E1B; opacity: 0.8; margin-left: -10px;}


        .balance-area {
            text-align: center;
            margin-bottom: 30px;
        }
        .balance-area .currency { font-size: 14px; font-weight: 600; color: var(--sub-text-color); margin-bottom: 5px; }
        .balance-area .amount { font-size: 36px; font-weight: 800; color: var(--text-color); letter-spacing: -0.5px; }

        /* ====================================
           5. Quick Actions
           ==================================== */
        .action-tray {
            display: flex;
            justify-content: space-around;
            margin-bottom: 35px;
            padding: 0 10px;
        }
        .action-btn-pill {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-color);
            cursor: pointer;
            gap: 8px;
            transition: transform 0.1s;
        }
        .action-btn-pill:active { transform: scale(0.95); }
        
        .action-btn-pill .icon {
            width: 48px;
            height: 48px;
            border-radius: 16px; /* ë‘¥ê·¼ ì‚¬ê°í˜• í˜•íƒœ */
            background: var(--button-bg-soft);
            color: var(--primary-color);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03);
        }

        /* í€µ ì•¡ì…˜ ì¹´ë“œ ê·¸ë¦¬ë“œ */
        .quick-actions-grid {
            padding: 0 20px;
        }
        .quick-actions-grid h3 {
            font-size: 17px;
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 15px;
        }
        .grid-4 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        .action-card {
            background-color: var(--card-background);
            border-radius: 16px;
            padding: 16px;
            color: white; /* í…ìŠ¤íŠ¸ëŠ” í°ìƒ‰ ìœ ì§€ */
            height: 110px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .action-card:active { transform: scale(0.98); }
        .action-card .icon { font-size: 24px; margin-bottom: 5px; }
        
        /* í•œí™” ê³„ì—´ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ (ë‹¤ì–‘í•œ ì˜¤ë Œì§€/ì›œí†¤ ë³€í˜•) */
        .action-card.primary { background: linear-gradient(135deg, #F37321, #FF9A44); } /* ë©”ì¸ ì˜¤ë Œì§€ */
        .action-card.secondary { background: linear-gradient(135deg, #5D5D5D, #333333); } /* ë‹¤í¬ ê·¸ë ˆì´ */
        .action-card.accent { background: linear-gradient(135deg, #FFC107, #FF9800); } /* ì˜ë¡œìš°/ê³¨ë“œ */
        .action-card.info { background: linear-gradient(135deg, #4DB6AC, #009688); } /* í‹¸/ì²­ë¡ (í¬ì¸íŠ¸) */


        /* ====================================
           6. Bottom Navigation Bar (Tab Bar)
           ==================================== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-width: 450px;
            margin: 0 auto;
            height: 70px;
            background: var(--card-background);
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.03);
            z-index: 10;
            border-top: 1px solid #f0f0f0;
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 11px;
            font-weight: 600;
            color: #BBBBBB;
            cursor: pointer;
            transition: color 0.2s;
            padding: 5px;
        }
        .nav-item i {
            font-size: 22px;
            margin-bottom: 4px;
        }
        .nav-item.active {
            color: var(--tab-color-active);
        }
        
        /* ====================================
           7. Other Pages (Form Styles)
           ==================================== */
        .form-card {
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.03);
        }
        .charge-amount-confirm {
            background: var(--button-bg-soft); /* ì—°í•œ ì£¼í™© ë°°ê²½ */
            padding: 14px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 15px;
            font-weight: 700;
            color: var(--primary-color);
            border: 1px solid rgba(243, 115, 33, 0.1);
        }
        
        /* Input & Button Styles Update */
        .btn.primary {
            background: var(--primary-color);
            color: #fff;
            box-shadow: 0 4px 12px rgba(243, 115, 33, 0.3); /* ì£¼í™©ìƒ‰ ê·¸ë¦¼ì */
        }
        .btn.primary:hover { opacity: 0.95; }
        
        /* ê¸°ì¡´ ì¶©ì „ UI ìŠ¤íƒ€ì¼ (Minimal) */
        .dual-currency { /* ìœ ì§€ */
            display: flex; align-items: center; gap: 12px; padding: 12px;
            border-radius: 12px; background: #F8F9FA; margin-top: 10px; border: 1px solid #EEEEEE;
        }
        .currency-box { flex: 1; padding: 8px; border-radius: 10px; }
        .currency-box.selectable.active {
            border-color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(243, 115, 33, 0.15);
        }
        .swap-arrow { color: var(--primary-color); }

        .currency-choice.active { border-color: var(--primary-color); box-shadow: 0 2px 8px rgba(243, 115, 33, 0.15); }
        .choice.active { border-color: var(--primary-color); box-shadow: 0 4px 12px rgba(243, 115, 33, 0.12); }

        /* ê¸°íƒ€ ìŠ¤íƒ€ì¼ ìœ ì§€ */
        .currency-box input { width: 100%; border: none; background: transparent; font-size: 20px; font-weight: 800; outline: none; }
        .currency-choice-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px; }
        .currency-choice { padding: 10px; border: 1px solid #e5e7eb; border-radius: 10px; cursor: pointer; font-weight: 700; text-align: center; transition: all 0.2s; background: #fff; display: flex; flex-direction: column; align-items: center; gap: 3px; font-size: 12px; color: var(--text-color); }
        .currency-flag { width: 24px; height: 24px; border-radius: 50%; font-size: 18px; line-height: 24px; text-align: center; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .back-link { display: inline-flex; align-items: center; gap: 6px; font-weight: 700; color: var(--text-color); cursor: pointer; margin-bottom: 12px; text-decoration: none; font-size: 14px; opacity: 0.7;}
        .back-link:hover { opacity: 1; color: var(--primary-color); }
        
        .choice-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 10px; margin-top: 12px; }
        .choice { padding: 14px; border: 1px solid #e5e7eb; border-radius: 12px; cursor: pointer; font-weight: 700; display: flex; align-items: center; gap: 10px; background: #fff; }
        .barcode-box { margin-top: 14px; padding: 14px; border-radius: 12px; background: #f7f7f7; text-align: center; border: 1px dashed #d1d5db; }
        .card-form { margin-top: 14px; display: grid; gap: 10px; }
        .input-group { margin-bottom: 14px; }
        .input-group label { display: block; font-size: 13px; color: var(--sub-text-color); margin-bottom: 6px; }
        .input-group input, .input-group select { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #e5e7eb; font-size: 15px; background: #fff; }
        .btn { display: inline-flex; align-items: center; justify-content: center; gap: 6px; padding: 12px 16px; border-radius: 12px; border: none; font-weight: 700; font-size: 14px; cursor: pointer; transition: background-color 0.2s ease, opacity 0.2s ease; width: 100%; } /* ë²„íŠ¼ ë„ˆë¹„ 100%ë¡œ ì¡°ì • */
        .toast { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%); background: #111; color: #fff; padding: 12px 18px; border-radius: 16px; font-size: 14px; box-shadow: 0 8px 20px rgba(0,0,0,0.2); display: none; z-index: 12; transition: opacity 0.3s ease; opacity: 0; }

    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

<div class="app-shell">
    <div class="topbar">
        <div class="profile"></div>
        <div class="pill" onclick="showToast('ì•Œë¦¼ í˜ì´ì§€ë¡œ ì´ë™')"><i class="fas fa-bell"></i></div>
    </div>

    <section class="page active" id="page-home">
        
        <div class="card-container">
            <div class="gradient-card">
                <div>
                    <div class="label" style="opacity:0.8;">Hanwha Travel Card</div>
                    <div class="card-chip" style="margin-top:15px;"></div>
                    <div class="card-number">0023 1234 5678 9000</div>
                </div>
                <div>
                    <div class="label" style="font-size:12px; opacity:0.8;">MEMBER SINCE 2024</div>
                    <div class="card-brand">
                        <div class="brand-circle red"></div>
                        <div class="brand-circle yellow"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="balance-area">
            <div class="currency">ì´ ì”ì•¡ (USD í™˜ì‚°)</div>
            <div class="amount" id="total-assets">$3,860.00</div>
        </div>

        <div class="action-tray">
            <div class="action-btn-pill" data-target="page-transfer">
                <div class="icon"><i class="fas fa-paper-plane"></i></div>
                ì†¡ê¸ˆ
            </div>
            <div class="action-btn-pill" data-target="page-charge">
                <div class="icon"><i class="fas fa-plus"></i></div>
                ì¶©ì „
            </div>
            <div class="action-btn-pill" onclick="showToast('ìš”ì²­ ê¸°ëŠ¥ ì¤€ë¹„ì¤‘')">
                <div class="icon"><i class="fas fa-hand-holding-usd"></i></div>
                ìš”ì²­
            </div>
            <div class="action-btn-pill" data-target="page-remit">
                <div class="icon"><i class="fas fa-globe-asia"></i></div>
                í™˜ì „
            </div>
        </div>

        <div class="quick-actions-grid">
            <h3>ìì£¼ ì“°ëŠ” ê¸°ëŠ¥</h3>
            <div class="grid-4">
                <div class="action-card primary" onclick="showToast('ì†Œë¹„ ë‚´ì—­ìœ¼ë¡œ ì´ë™')">
                    <div><i class="fas fa-receipt"></i></div>
                    <div class="label">ì†Œë¹„ ë‚´ì—­</div>
                </div>
                <div class="action-card secondary" onclick="showToast('êµí†µì¹´ë“œ ì¶©ì „ìœ¼ë¡œ ì´ë™')">
                    <div><i class="fas fa-bus"></i></div>
                    <div class="label">êµí†µì¹´ë“œ</div>
                </div>
                <div class="action-card accent" onclick="showToast('ë¯¸ì…˜/í˜œíƒìœ¼ë¡œ ì´ë™')">
                    <div><i class="fas fa-medal"></i></div>
                    <div class="label">ë¯¸ì…˜ (5,000P)</div>
                </div>
                <div class="action-card info" onclick="showToast('ì²´ë¥˜ ì§€ì›ìœ¼ë¡œ ì´ë™')">
                    <div><i class="fas fa-passport"></i></div>
                    <div class="label">ë¹„ì ê´€ë¦¬</div>
                </div>
            </div>
        </div>
        
    </section>

    <section class="page" id="page-charge">
        <a class="back-link" data-target="page-home"><i class="fas fa-arrow-left"></i> í™ˆìœ¼ë¡œ</a>
        <div class="form-card">
            <h2 style="margin-top:0;">ì¶©ì „í•˜ê¸°</h2>
            <p style="color:var(--sub-text-color); margin-top:4px;">ì›í•˜ëŠ” í†µí™”ì™€ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>

            <div class="charge-step active" id="charge-step-amount">
                <div class="currency-choice-grid" id="currency-choice-grid">
                    <div class="currency-choice active" data-currency="USD">
                        <span class="currency-flag">ğŸ‡ºğŸ‡¸</span>
                        USD
                    </div>
                    <div class="currency-choice" data-currency="EUR">
                        <span class="currency-flag">ğŸ‡ªğŸ‡º</span>
                        EUR
                    </div>
                    <div class="currency-choice" data-currency="AUD">
                        <span class="currency-flag">ğŸ‡¦ğŸ‡º</span>
                        AUD
                    </div>
                </div>

                <div class="dual-currency" id="dual-currency">
                    <div class="currency-box selectable active" data-currency="krw">
                        <small style="color:var(--sub-text-color)">KRW (ì›í™”)</small>
                        <input id="charge-krw-input" type="text" inputmode="decimal" placeholder="0">
                    </div>
                    
                    <div class="swap-arrow"><i class="fas fa-exchange-alt"></i></div> 
                    
                    <div class="currency-box selectable" data-currency="local">
                        <small style="color:var(--sub-text-color)" id="local-currency-label">USD (í˜„ì§€ í†µí™”)</small>
                        <input id="charge-local-input" type="text" inputmode="decimal" placeholder="0">
                    </div>
                </div>
                
                <button class="btn primary" id="charge-next" style="margin-top:14px;">ë‹¤ìŒ</button>
            </div>

            <div class="charge-step" id="charge-step-method">
                <a class="back-link" id="charge-back-to-amount" style="margin-bottom: 20px;"><i class="fas fa-arrow-left"></i> ê¸ˆì•¡ ì¬ì„¤ì •</a>
                
                <div class="charge-amount-confirm" id="charge-amount-confirm"></div>

                <p style="font-weight:700; margin:0 0 10px;">ì¶©ì „ ìˆ˜ë‹¨ ì„ íƒ</p>
                <div class="choice-grid">
                    <div class="choice" data-method="cash"><i class="fas fa-store" style="color:var(--primary-color);"></i> í¸ì˜ì  (í˜„ê¸ˆ)</div>
                    <div class="choice" data-method="card"><i class="fas fa-credit-card" style="color:var(--primary-color);"></i> ì¹´ë“œ ê²°ì œ</div>
                </div>

                <div class="barcode-box" id="barcode-box" style="display:none;">
                    <div style="font-weight:700; margin-bottom:6px;">í¸ì˜ì  ì¶©ì „ìš© ë°”ì½”ë“œ</div>
                    <img id="barcode-img" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='260' height='80'><rect width='260' height='80' fill='white'/><g stroke='black' stroke-width='6'><line x1='15' y1='10' x2='15' y2='70'/><line x1='35' y1='10' x2='35' y2='70'/><line x1='55' y1='10' x2='55' y2='70'/><line x1='80' y1='10' x2='80' y2='70'/><line x1='100' y1='10' x2='100' y2='70'/><line x1='120' y1='10' x2='120' y2='70'/><line x1='145' y1='10' x2='145' y2='70'/><line x1='165' y1='10' x2='165' y2='70'/><line x1='185' y1='10' x2='185' y2='70'/><line x1='205' y1='10' x2='205' y2='70'/><line x1='225' y1='10' x2='225' y2='70'/></g><text x='130' y='60' text-anchor='middle' font-family='monospace' font-size='14'>HANWHA CHARGE</text></svg>" alt="barcode" style="width:220px; height:auto;">
                    <div style="margin-top:6px; color:var(--sub-text-color); font-size:12px;">ì ì›ì—ê²Œ ì´ ë°”ì½”ë“œë¥¼ ë³´ì—¬ì£¼ì„¸ìš”.</div>
                    <button class="btn primary" id="barcode-complete" style="margin-top:10px;">ì¶©ì „ ì™„ë£Œ í™•ì¸</button>
                </div>

                <div class="card-form" id="card-form" style="display:none;">
                    <div class="input-group">
                        <label for="card-number">ì¹´ë“œ ë²ˆí˜¸</label>
                        <input type="text" id="card-number" placeholder="0000 0000 0000 0000" inputmode="numeric" maxlength="19">
                    </div>
                    <div class="input-group">
                        <label for="card-exp">ìœ íš¨ê¸°ê°„ (MM/YY)</label>
                        <input type="text" id="card-exp" placeholder="12/27" maxlength="5">
                    </div>
                    <div class="input-group">
                        <label for="card-cvc">CVC</label>
                        <input type="password" id="card-cvc" placeholder="***" maxlength="4" inputmode="numeric">
                    </div>
                    <button class="btn primary" id="card-submit"><i class="fas fa-check"></i> ê²°ì œ ë° ì¶©ì „</button>
                </div>
            </div>
        </div>
    </section>

    <section class="page" id="page-transfer">
        <a class="back-link" data-target="page-home"><i class="fas fa-arrow-left"></i> í™ˆìœ¼ë¡œ</a>
        <div class="form-card">
            <h2 style="margin-top:0;">ì†¡ê¸ˆ (ì—°ê²°ê³„ì¢Œ)</h2>
            <p style="color:var(--sub-text-color); margin-top:4px;">ì—°ê²°ëœ êµ­ë‚´ ê³„ì¢Œë¡œ ì¦‰ì‹œ ì´ì²´í•©ë‹ˆë‹¤.</p>
            <div class="input-group">
                <label for="transfer-amount">ì´ì²´ ê¸ˆì•¡ (â‚©)</label>
                <input type="number" id="transfer-amount" min="0" inputmode="numeric" placeholder="ì˜ˆ: 30000">
            </div>
            <button class="btn primary" id="transfer-submit"><i class="fas fa-paper-plane"></i> ì†¡ê¸ˆí•˜ê¸°</button>
        </div>
    </section>

    <section class="page" id="page-remit">
        <a class="back-link" data-target="page-home"><i class="fas fa-arrow-left"></i> í™ˆìœ¼ë¡œ</a>
        <div class="form-card">
            <h2 style="margin-top:0;">í™˜ì „ ë° í•´ì™¸ ì†¡ê¸ˆ</h2>
            <p style="color:var(--sub-text-color); margin-top:4px;">ì‹¤ì‹œê°„ í™˜ìœ¨ì´ ì ìš©ë˜ë©° ìˆ˜ìˆ˜ë£Œê°€ ë¶€ê³¼ë©ë‹ˆë‹¤.</p>
            <div class="input-group">
                <label for="remit-amount">ë³´ë‚¼ ê¸ˆì•¡ (â‚©)</label>
                <input type="number" id="remit-amount" min="0" inputmode="numeric" placeholder="ì˜ˆ: 100000">
            </div>
            <div class="input-group">
                <label for="remit-currency">ë°›ì„ í†µí™”</label>
                <select id="remit-currency">
                    <option value="USD">USD (ë¯¸êµ­ ë‹¬ëŸ¬)</option>
                    <option value="EUR">EUR (ìœ ë¡œ)</option>
                    <option value="JPY">JPY (ì¼ë³¸ ì—”)</option>
                </select>
            </div>
            <button class="btn primary" id="remit-submit"><i class="fas fa-globe"></i> ì†¡ê¸ˆí•˜ê¸°</button>
        </div>
    </section>
</div>

<div class="bottom-nav">
    <div class="nav-item active" data-target="page-home"><i class="fas fa-home"></i> í™ˆ</div>
    <div class="nav-item" onclick="showToast('ì´ìš© ë‚´ì—­ í™•ì¸')"><i class="fas fa-list-alt"></i> ë‚´ì—­</div>
    <div class="nav-item" onclick="showToast('ì¹´ë“œ ê´€ë¦¬ ë©”ë‰´')"><i class="fas fa-credit-card"></i> ì¹´ë“œ</div>
    <div class="nav-item" onclick="showToast('ì „ì²´ ë©”ë‰´')"><i class="fas fa-bars"></i> ì „ì²´</div>
</div>

<div class="toast" id="toast"></div>

<script>
    // JS ë¡œì§ì€ ê¸°ì¡´ ê¸°ëŠ¥(ì¶©ì „ ë¡œì§, UX ë“±)ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•©ë‹ˆë‹¤.

    const state = {
        totalAssets: 1540000,
        cardBalance: 840000,
        points: 12000,
        missionAvailable: true,
        visaDday: 88,
        timeline: [
            { icon: 'fa-wallet', title: 'ì„ ë¶ˆê³„ì¢Œ ì¶©ì „', desc: 'ê°„í¸ ì¶©ì „ ì„±ê³µ', amount: '+â‚©200,000' },
            { icon: 'fa-plane', title: 'í•­ê³µê¶Œ ê²°ì œ', desc: 'Korea â†’ USA', amount: '-â‚©650,000' },
            { icon: 'fa-coins', title: 'í™˜ì „ ëª©í‘œ ë“±ë¡', desc: 'ë‹¬ëŸ¬ ëª©í‘œí™˜ìœ¨ 1,320ì›', amount: 'ì•Œë¦¼ ON' },
        ],
    };

    const exchangeRates = {
        USD: 1300,
        EUR: 1400,
        AUD: 850,
    };

    const el = {
        totalAssets: document.getElementById('total-assets'),
        toast: document.getElementById('toast'),
        transferInput: document.getElementById('transfer-amount'),
        remitInput: document.getElementById('remit-amount'),
        remitCurrency: document.getElementById('remit-currency'),
        
        // ì¶©ì „ ê´€ë ¨ ìš”ì†Œ
        chargeKrwInput: document.getElementById('charge-krw-input'),
        chargeLocalInput: document.getElementById('charge-local-input'),
        localCurrencyLabel: document.getElementById('local-currency-label'),
        currencyBoxes: document.querySelectorAll('.dual-currency .currency-box.selectable'),
        currencyChoiceBtns: document.querySelectorAll('.currency-choice-grid .currency-choice'), 
        chargeAmountConfirm: document.getElementById('charge-amount-confirm'), 
        
        chargeSteps: {
            amount: document.getElementById('charge-step-amount'),
            method: document.getElementById('charge-step-method'),
        },
        barcodeBox: document.getElementById('barcode-box'),
        cardForm: document.getElementById('card-form'),
        barcodeComplete: document.getElementById('barcode-complete'),
        cardSubmit: document.getElementById('card-submit'),
        choiceBtns: document.querySelectorAll('.choice'),
        chargeNext: document.getElementById('charge-next'),
        chargeBackToAmount: document.getElementById('charge-back-to-amount'),
        cardNumber: document.getElementById('card-number'),
        cardExp: document.getElementById('card-exp'),
        cardCvc: document.getElementById('card-cvc'),
    };

    const pages = {
        'page-home': document.getElementById('page-home'),
        'page-charge': document.getElementById('page-charge'),
        'page-transfer': document.getElementById('page-transfer'),
        'page-remit': document.getElementById('page-remit'),
    };

    function formatMoney(value) {
        return `â‚©${value.toLocaleString('ko-KR')}`;
    }

    function pushTimeline(icon, title, desc, amount) {
        state.timeline = [{ icon, title, desc, amount }, ...state.timeline].slice(0, 6);
    }

    function render() {
        const usdEquivalent = (state.totalAssets / exchangeRates['USD']).toFixed(2);
        el.totalAssets.textContent = `$${usdEquivalent}`;
    }

    function showToast(message) {
        el.toast.textContent = message;
        el.toast.style.opacity = 1;
        el.toast.style.display = 'block';
        setTimeout(() => {
            el.toast.style.opacity = 0;
            setTimeout(() => { el.toast.style.display = 'none'; }, 300);
        }, 1800);
    }

    function navigate(targetId) {
        Object.values(pages).forEach(p => p.classList.remove('active'));
        pages[targetId].classList.add('active');
        
        document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
        const activeNav = document.querySelector(`.nav-item[data-target="${targetId}"]`);
        if (activeNav) activeNav.classList.add('active');
        else if (targetId === 'page-home') document.querySelector('.nav-item[data-target="page-home"]').classList.add('active');

        if (targetId === 'page-charge') {
            setChargeStep('amount');
            updateChargeDisplay();
        }
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function submitTransfer() {
        const value = Number(el.transferInput.value);
        if (!value || value <= 0) {
            showToast('ê¸ˆì•¡ì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”');
            return;
        }
        if (value > state.cardBalance) {
            showToast(`ì”ì•¡(${formatMoney(state.cardBalance)})ì´ ë¶€ì¡±í•©ë‹ˆë‹¤`);
            return;
        }
        state.cardBalance -= value;
        state.totalAssets -= value; 
        pushTimeline('fa-exchange-alt', 'ì†¡ê¸ˆ ì„±ê³µ', 'ì—°ê²°ê³„ì¢Œë¡œ ì†¡ê¸ˆ ì²˜ë¦¬ë¨', `-${formatMoney(value)}`);
        render();
        showToast('ì†¡ê¸ˆ ì™„ë£Œ');
        el.transferInput.value = '';
        navigate('page-home');
    }

    function submitRemit() {
        const value = Number(el.remitInput.value);
        if (!value || value <= 0) {
            showToast('ê¸ˆì•¡ì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”');
            return;
        }
        const fee = { USD: 5000, EUR: 4000, JPY: 3000 }[el.remitCurrency.value] || 5000;
        const total = value + fee;
        if (total > state.cardBalance) {
            showToast(`ì”ì•¡(${formatMoney(state.cardBalance)})ì´ ë¶€ì¡±í•©ë‹ˆë‹¤ (ìˆ˜ìˆ˜ë£Œ ${formatMoney(fee)} í¬í•¨)`);
            return;
        }
        state.cardBalance -= total;
        state.totalAssets -= total;
        const desc = `${el.remitCurrency.value} ì†¡ê¸ˆ (ìˆ˜ìˆ˜ë£Œ ${formatMoney(fee)})`;
        pushTimeline('fa-plane-departure', 'í•´ì™¸ ì†¡ê¸ˆ', desc, `-${formatMoney(total)}`);
        render();
        showToast('í•´ì™¸ ì†¡ê¸ˆ ì‹ ì²­ ì™„ë£Œ');
        el.remitInput.value = '';
        navigate('page-home');
    }

    const chargeState = {
        step: 'amount',
        krw: 0,
        local: 0,
        currency: 'USD', 
        rate: exchangeRates['USD'],
        method: null,
        updating: false,
    };

    function getChargeAmountKrw() {
        return Math.round(chargeState.krw || 0);
    }

    function setActiveCurrency(target) {
        chargeState.active = target;
        el.currencyBoxes.forEach(box => {
            const targetData = (target === 'krw' ? 'krw' : 'local');
            box.classList.toggle('active', box.dataset.currency === targetData);
        });
        if (target === 'krw') el.chargeKrwInput.focus();
        if (target === 'local') el.chargeLocalInput.focus();
    }

    function updateChargeDisplay() {
        const krwRounded = chargeState.krw ? Math.round(chargeState.krw) : 0;
        el.chargeKrwInput.value = krwRounded || '';
        el.chargeLocalInput.value = chargeState.local > 0 ? chargeState.local.toFixed(2) : '';
    }
    
    function updateLocalCurrency(currencyCode) {
        if (chargeState.currency === currencyCode) return;

        chargeState.currency = currencyCode;
        chargeState.rate = exchangeRates[currencyCode];
        
        el.localCurrencyLabel.textContent = `${currencyCode} (í˜„ì§€ í†µí™”)`;
        
        el.currencyChoiceBtns.forEach(btn => {
            btn.classList.toggle('active', btn.dataset.currency === currencyCode);
        });

        chargeState.local = chargeState.krw / chargeState.rate;
        
        updateChargeDisplay();
    }

    function gotoMethodStep() {
        const amount = getChargeAmountKrw();
        
        const MIN_CHARGE = 10000;
        const MAX_CHARGE = 200000;

        if (!amount || amount <= 0) {
            showToast('ì¶©ì „í•  ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
            return;
        }
        
        if (amount < MIN_CHARGE) {
            showToast(`ìµœì†Œ ì¶©ì „ ê¸ˆì•¡ì€ ${formatMoney(MIN_CHARGE)}ì…ë‹ˆë‹¤.`);
            return;
        }

        if (amount > MAX_CHARGE) {
            showToast(`1íšŒ ìµœëŒ€ ì¶©ì „ ê¸ˆì•¡ì€ ${formatMoney(MAX_CHARGE)}ì…ë‹ˆë‹¤.`);
            return;
        }

        chargeState.krw = amount;
        chargeState.local = amount / chargeState.rate; 
        updateChargeDisplay();
        setChargeStep('method');
    }

    function setChargeStep(step) {
        chargeState.step = step;
        Object.values(el.chargeSteps).forEach(s => s.classList.remove('active'));
        el.chargeSteps[step].classList.add('active');
        
        if (step === 'amount') {
            chargeState.method = null;
            el.barcodeBox.style.display = 'none';
            el.cardForm.style.display = 'none';
            el.choiceBtns.forEach(btn => btn.classList.remove('active'));
            setActiveCurrency('krw');
            updateChargeDisplay();

        } else if (step === 'method') {
            const krwAmount = getChargeAmountKrw();
            el.chargeAmountConfirm.textContent = `${formatMoney(krwAmount)} KRWë¥¼ ì¶©ì „í•©ë‹ˆë‹¤. (ì•½ ${chargeState.local.toFixed(2)} ${chargeState.currency})`;
        }
    }

    function handleKrwInput() {
        if (chargeState.updating) return;
        const value = parseFloat(el.chargeKrwInput.value.replace(/,/g, '')) || 0;
        chargeState.updating = true;
        chargeState.krw = Math.max(0, value);
        chargeState.local = chargeState.krw / chargeState.rate;
        el.chargeLocalInput.value = chargeState.local > 0 ? chargeState.local.toFixed(2) : (value === 0 ? '' : '0.00');
        chargeState.updating = false;
    }

    function handleLocalInput() {
        if (chargeState.updating) return;
        const value = parseFloat(el.chargeLocalInput.value.replace(/,/g, '')) || 0;
        chargeState.updating = true;
        chargeState.local = Math.max(0, value);
        chargeState.krw = chargeState.local * chargeState.rate;
        el.chargeKrwInput.value = chargeState.krw > 0 ? Math.round(chargeState.krw) : (value === 0 ? '' : '0');
        chargeState.updating = false;
    }

    function selectMethod(method) {
        chargeState.method = method;
        el.choiceBtns.forEach(btn => btn.classList.toggle('active', btn.dataset.method === method));
        if (method === 'cash') {
            el.barcodeBox.style.display = 'block';
            el.cardForm.style.display = 'none';
        } else if (method === 'card') {
            el.barcodeBox.style.display = 'none';
            el.cardForm.style.display = 'grid';
        }
    }

    function completeCharge(source) {
        const amount = getChargeAmountKrw();
        if (!amount) {
            showToast('ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”');
            return;
        }
        if (source === 'card' && (!el.cardNumber.value || !el.cardExp.value || !el.cardCvc.value)) {
            showToast('ì¹´ë“œ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”');
            return;
        }
        
        state.cardBalance += amount;
        state.totalAssets += amount;
        
        pushTimeline('fa-plus-circle', 'ì¶©ì „ ì™„ë£Œ', source === 'cash' ? 'í¸ì˜ì  í˜„ê¸ˆ' : 'ì¹´ë“œ ê²°ì œ', `+${formatMoney(amount)}`);
        render();
        showToast('ì¶©ì „ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
        
        chargeState.krw = 0;
        chargeState.local = 0;
        if (source === 'card') {
            el.cardNumber.value = '';
            el.cardExp.value = '';
            el.cardCvc.value = '';
        }
        updateChargeDisplay();
        setChargeStep('amount');
        navigate('page-home');
    }

    // Event Listeners
    document.querySelectorAll('[data-target]').forEach(btn => {
        btn.addEventListener('click', () => navigate(btn.dataset.target));
    });
    document.querySelectorAll('.nav-item').forEach(btn => {
        if (btn.dataset.target) {
             btn.addEventListener('click', () => navigate(btn.dataset.target));
        }
    });

    document.getElementById('transfer-submit').addEventListener('click', submitTransfer);
    document.getElementById('remit-submit').addEventListener('click', submitRemit);
    
    el.chargeNext.addEventListener('click', gotoMethodStep);
    el.chargeBackToAmount.addEventListener('click', () => setChargeStep('amount'));
    el.choiceBtns.forEach(btn => btn.addEventListener('click', () => selectMethod(btn.dataset.method)));
    el.barcodeComplete.addEventListener('click', () => completeCharge('cash'));
    el.cardSubmit.addEventListener('click', () => completeCharge('card'));

    el.currencyChoiceBtns.forEach(btn => {
        btn.addEventListener('click', () => updateLocalCurrency(btn.dataset.currency));
    });

    el.chargeKrwInput.addEventListener('input', handleKrwInput);
    el.chargeLocalInput.addEventListener('input', handleLocalInput);
    el.currencyBoxes.forEach(box => box.addEventListener('click', () => setActiveCurrency(box.dataset.currency)));
    document.querySelectorAll('.action-btn-pill[data-target]').forEach(btn => {
        btn.addEventListener('click', () => navigate(btn.dataset.target));
    });

    // Init
    render();
    updateChargeDisplay();
    updateLocalCurrency('USD');
    setActiveCurrency('krw');
</script>

</body>
</html>