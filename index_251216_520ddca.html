<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Boarding - Hanwha Style Finance App</title>
    <style>
        /* ====================================
           1. Hanwha Style Color Palette & Basic Setup
           ==================================== */
        :root {
            --primary-color: #F37321; 
            --secondary-color: #231F20; 
            --background-color: #F8F9FA;
            --card-background: #FFFFFF;
            --text-color: #222222;
            --sub-text-color: #888888;
            --card-gradient: linear-gradient(135deg, #FF9966, #FF5E62); 
            --tab-color-active: #F37321;
            --button-bg-soft: #FFF0E6;
            --income-color: #F37321; /* í•œí™” ì˜¤ë Œì§€ë¡œ ì…ê¸ˆ ê°•ì¡° */
            --expense-color: #222222;
        }

        * { box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            min-height: 100vh;
            padding-bottom: 80px; /* í•˜ë‹¨ íƒ­ ë°” ê³µê°„ í™•ë³´ */
            -webkit-tap-highlight-color: transparent;
        }

        /* ì•± ê»ë°ê¸° */
        .app-shell {
            max-width: 450px;
            margin: 0 auto;
            background-color: var(--card-background);
            min-height: 100vh;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.05);
            position: relative;
            padding-bottom: 90px;
        }

        .page { display: none; padding: 20px; }
        .page.active { display: block; }

        /* ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ */
        .hidden { display: none !important; }
        .disabled-area { opacity: 0.4; pointer-events: none; }
        
        /* ====================================
           Top Bar
           ==================================== */
        .topbar {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 20px 20px 0;
        }
        .topbar .profile {
            width: 32px; height: 32px; border-radius: 50%; background-color: #EEEEEE; margin-right: 12px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23555"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>');
            background-repeat: no-repeat; background-position: center; background-size: 70%;
        }
        .topbar .pill {
            background: var(--button-bg-soft); color: var(--primary-color); padding: 8px 14px;
            border-radius: 20px; font-size: 14px; font-weight: 700; cursor: pointer;
        }

        /* ====================================
           Home Page Components
           ==================================== */
        .card-container { padding: 10px 20px; }
        .gradient-card {
            width: 100%; height: 200px; background: var(--card-gradient); border-radius: 20px;
            box-shadow: 0 10px 25px rgba(243, 115, 33, 0.3); padding: 20px; color: white;
            position: relative; margin-bottom: 25px; display: flex; flex-direction: column; justify-content: space-between;
        }
        .gradient-card .card-brand { position: absolute; right: 20px; bottom: 20px; display: flex; }
        .brand-circle { width: 24px; height: 24px; border-radius: 50%; }
        .brand-circle.red { background-color: #EB001B; opacity: 0.8; }
        .brand-circle.yellow { background-color: #F79E1B; opacity: 0.8; margin-left: -10px;}
        .card-chip { width: 35px; height: 25px; background: rgba(255,255,255,0.3); border-radius: 4px; margin-bottom: 10px; }

        .balance-area { text-align: center; margin-bottom: 30px; }
        .balance-area .amount { font-size: 36px; font-weight: 800; color: var(--text-color); letter-spacing: -0.5px; }
        .balance-area .currency { font-size: 14px; font-weight: 600; color: var(--sub-text-color); margin-bottom: 5px; }

        .action-tray { display: flex; justify-content: space-around; margin-bottom: 35px; padding: 0 10px; }
        .action-btn-pill { display: flex; flex-direction: column; align-items: center; font-size: 13px; font-weight: 600; color: var(--text-color); cursor: pointer; gap: 8px; transition: transform 0.1s; }
        .action-btn-pill:active { transform: scale(0.95); }
        .action-btn-pill .icon { width: 48px; height: 48px; border-radius: 16px; background: var(--button-bg-soft); color: var(--primary-color); display: flex; justify-content: center; align-items: center; font-size: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.03); }

        .quick-actions-grid { padding: 0 20px; }
        .grid-4 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .action-card { border-radius: 16px; padding: 16px; color: white; height: 110px; display: flex; flex-direction: column; justify-content: space-between; cursor: pointer; transition: transform 0.1s; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05); }
        .action-card:active { transform: scale(0.98); }
        .action-card.primary { background: linear-gradient(135deg, #F37321, #FF9A44); }
        .action-card.secondary { background: linear-gradient(135deg, #5D5D5D, #333333); }
        .action-card.accent { background: linear-gradient(135deg, #FFC107, #FF9800); }
        .action-card.info { background: linear-gradient(135deg, #4DB6AC, #009688); }

        /* ====================================
           Navigation Bar
           ==================================== */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; right: 0; max-width: 450px; margin: 0 auto;
            height: 70px; background: var(--card-background); display: flex; justify-content: space-around; align-items: center;
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.03); z-index: 10; border-top: 1px solid #f0f0f0;
        }
        .nav-item { display: flex; flex-direction: column; align-items: center; font-size: 11px; font-weight: 600; color: #BBBBBB; cursor: pointer; padding: 5px; transition: color 0.2s; }
        .nav-item.active { color: var(--tab-color-active); }
        .nav-item i { font-size: 22px; margin-bottom: 4px; }

        /* ====================================
           Page Styles
           ==================================== */
        .form-card { padding: 20px; background: white; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.03); }
        .back-link { display: inline-flex; align-items: center; gap: 6px; font-weight: 700; color: var(--text-color); cursor: pointer; margin-bottom: 15px; font-size: 14px; opacity: 0.7; text-decoration: none;}
        .back-link:hover { opacity: 1; color: var(--primary-color); }

        /* --- [NEW] ë‚´ì—­(History) ìŠ¤íƒ€ì¼ --- */
        .history-month-header {
            font-size: 13px; color: var(--sub-text-color); margin-bottom: 15px; margin-top: 10px; font-weight: 600;
        }
        .transaction-list {
            list-style: none; padding: 0; margin: 0;
        }
        .transaction-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 18px 0; border-bottom: 1px solid #f5f5f5;
        }
        .t-left { display: flex; align-items: center; gap: 15px; }
        .t-avatar {
            width: 42px; height: 42px; border-radius: 50%;
            background-color: #f0f0f0; background-size: cover; background-position: center;
            display: flex; align-items: center; justify-content: center;
            font-size: 18px; color: #555;
        }
        .t-info { display: flex; flex-direction: column; gap: 4px; }
        .t-title { font-size: 16px; font-weight: 700; color: var(--text-color); }
        .t-date { font-size: 12px; color: var(--sub-text-color); }
        
        .t-right { text-align: right; display: flex; flex-direction: column; gap: 4px; }
        .t-amount { font-size: 16px; font-weight: 700; color: var(--expense-color); }
        .t-amount.income { color: var(--income-color); } /* í•œí™” ì˜¤ë Œì§€ */
        .t-status { font-size: 11px; color: var(--sub-text-color); font-weight: 500; }

        /* --- ì¶©ì „í•˜ê¸° ìŠ¤íƒ€ì¼ --- */
        .currency-choice-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px; }
        .currency-choice { padding: 10px; border: 1px solid #e5e7eb; border-radius: 10px; cursor: pointer; font-weight: 700; text-align: center; background: #fff; display: flex; flex-direction: column; align-items: center; gap: 3px; font-size: 12px; transition: all 0.2s; }
        .currency-choice.active { border-color: var(--primary-color); background-color: var(--button-bg-soft); color: var(--primary-color); box-shadow: 0 2px 8px rgba(243, 115, 33, 0.15); }
        
        .dual-currency { 
            display: flex; align-items: center; gap: 10px; padding: 12px; 
            border-radius: 12px; background: #F8F9FA; margin-bottom: 15px; border: 1px solid #EEEEEE; 
        }
        .currency-box { 
            flex: 1; padding: 10px; border-radius: 10px; 
            transition: all 0.2s; border: 1px solid transparent; 
        }
        .currency-box.active-input {
            background-color: #fff;
            border-color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(243, 115, 33, 0.1);
        }
        .swap-arrow { color: var(--primary-color); font-size: 18px; padding: 0 5px; }

        .currency-box input { width: 100%; border: none; background: transparent; font-size: 22px; font-weight: 800; outline: none; text-align: right; margin-top: 5px; color: var(--text-color); }
        .currency-box input[type="number"] { -moz-appearance: textfield; }
        .currency-box input[type="number"]::-webkit-outer-spin-button, 
        .currency-box input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        .currency-box input::placeholder { color: #ccc; font-weight: 400; font-size: 18px; }
        .currency-box input[readonly] { color: var(--primary-color); } 
        .currency-box small { font-size: 12px; color: var(--sub-text-color); display: block; }

        .money-grid { display: flex; flex-wrap: wrap; justify-content: space-between; gap: 8px; margin-bottom: 20px; }
        .money-btn { width: 31%; padding: 12px 0; background-color: #f5f5f5; border: none; border-radius: 8px; font-size: 13px; font-weight: 600; color: #333; cursor: pointer; transition: background 0.2s; }
        .money-btn:active { background-color: #e0e0e0; }

        .action-row { display: flex; gap: 10px; margin-top: 10px; }
        .btn-reset { flex: 1; background: #fff; border: 1px solid #ddd; color: #666; padding: 14px; border-radius: 12px; font-weight: 700; cursor: pointer; }
        .btn-next { flex: 2; background: var(--primary-color); border: none; color: white; padding: 14px; border-radius: 12px; font-weight: 700; cursor: pointer; }

        .payment-section { margin-top: 20px; }
        .section-title { font-size: 16px; font-weight: 700; margin-bottom: 15px; display: block; }
        .payment-option { display: flex; align-items: center; padding: 15px 0; border-bottom: 1px solid #eee; cursor: pointer; font-size: 15px;}
        .payment-option.selected { background-color: #fffaf5; }
        .payment-option.selected .radio-circle { border-color: var(--primary-color); }
        .payment-option.selected .radio-circle::after { content: ''; width: 10px; height: 10px; background: var(--primary-color); border-radius: 50%; }
        .radio-circle { width: 20px; height: 20px; border: 2px solid #ccc; border-radius: 50%; margin-right: 15px; display: flex; align-items: center; justify-content: center; }
        
        .detail-box { margin-top: 10px; padding: 15px; background: #f9f9f9; border-radius: 10px; border: 1px solid #eee; display: none; }
        .detail-box.show { display: block; animation: fadeIn 0.3s; }

        .saved-card-list { margin-top: 5px; }
        .saved-card-item { display: flex; align-items: center; padding: 10px; border: 1px solid #eee; border-radius: 8px; margin-bottom: 8px; background: #fff; cursor: pointer; }
        .saved-card-item.active { border-color: var(--primary-color); background-color: #fff0e6; }
        .saved-card-item input { margin-right: 10px; accent-color: var(--primary-color); }
        .saved-card-info { font-size: 14px; font-weight: 600; color: #333; }
        .saved-card-sub { font-size: 12px; color: #888; }

        /* --- ì†¡ê¸ˆí•˜ê¸° í˜ì´ì§€ ìŠ¤íƒ€ì¼ --- */
        .transfer-search {
            width: 100%; padding: 12px 15px; border-radius: 20px; border: 1px solid #eee; background: #f5f5f5; 
            font-size: 14px; margin-bottom: 25px; outline: none;
        }
        .transfer-search:focus { border-color: var(--primary-color); background: #fff; }
        
        .recipient-list { list-style: none; padding: 0; margin: 0; }
        .recipient-item { 
            display: flex; align-items: center; padding: 15px 0; border-bottom: 1px solid #f0f0f0; cursor: pointer; transition: background 0.2s;
        }
        .recipient-item:active { background-color: #f9f9f9; }
        .recipient-avatar { 
            width: 48px; height: 48px; border-radius: 50%; background-color: #eee; margin-right: 15px; 
            display: flex; align-items: center; justify-content: center; font-weight: 700; color: #555; font-size: 18px;
            position: relative;
        }
        .badge-nexus {
            position: absolute; bottom: -2px; right: -2px; background: var(--primary-color); color: white;
            font-size: 9px; padding: 2px 4px; border-radius: 6px; border: 2px solid white;
        }
        .recipient-info { flex: 1; }
        .recipient-name { font-size: 16px; font-weight: 700; color: var(--text-color); margin-bottom: 4px; }
        .recipient-detail { font-size: 13px; color: var(--sub-text-color); }

        .big-money-input-wrapper {
            background-color: #fff; border: 2px solid var(--primary-color); border-radius: 12px;
            padding: 15px; margin: 20px 0; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 12px rgba(243, 115, 33, 0.1);
        }
        .big-money-input {
            width: 100%; border: none; background: transparent; font-size: 32px; font-weight: 800;
            outline: none; text-align: center; color: var(--text-color);
        }
        .big-money-input::placeholder { color: #ccc; }
        .big-money-input[type="number"] { -moz-appearance: textfield; }
        .big-money-input[type="number"]::-webkit-outer-spin-button, 
        .big-money-input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }

        /* --- [NEW] ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (PIN) í˜ì´ì§€ --- */
        .pin-container { text-align: center; margin-top: 30px; }
        .pin-message { font-size: 18px; font-weight: 700; margin-bottom: 30px; line-height: 1.4; color: #333; }
        .pin-display { display: flex; justify-content: center; gap: 15px; margin-bottom: 50px; }
        .pin-dot { width: 16px; height: 16px; border-radius: 50%; background-color: #ddd; transition: all 0.2s; }
        .pin-dot.filled { background-color: #333; transform: scale(1.2); }

        /* ë³´ì•ˆ í‚¤íŒ¨ë“œ ìŠ¤íƒ€ì¼ */
        .num-pad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding: 0 20px; max-width: 350px; margin: 0 auto; }
        .num-key { 
            padding: 20px 0; font-size: 24px; font-weight: 600; color: #333; text-align: center; 
            border-radius: 12px; cursor: pointer; user-select: none; transition: background 0.2s;
        }
        .num-key:active { background-color: #f0f0f0; }
        .num-key.empty { cursor: default; }

        /* --- [NEW] ì™„ë£Œ í˜ì´ì§€ (Success) --- */
        .success-container { text-align: center; padding-top: 40px; }
        .success-icon { 
            width: 80px; height: 80px; background: var(--primary-color); border-radius: 50%; color: white;
            display: flex; align-items: center; justify-content: center; font-size: 40px; margin: 0 auto 20px;
            box-shadow: 0 10px 20px rgba(243, 115, 33, 0.3);
        }
        .success-title { font-size: 24px; font-weight: 800; margin-bottom: 10px; color: var(--text-color); }
        .success-desc { font-size: 16px; color: var(--sub-text-color); margin-bottom: 40px; }
        
        .success-btns { display: flex; gap: 12px; margin-top: 20px; }
        .btn-share { flex: 1; background: #eee; color: #333; font-weight: 700; border: none; padding: 15px; border-radius: 12px; cursor: pointer; }
        .btn-complete { flex: 1; background: var(--primary-color); color: white; font-weight: 700; border: none; padding: 15px; border-radius: 12px; cursor: pointer; }


        /* Bottom Floating Bar */
        .bottom-floating-bar {
            position: fixed; bottom: 0; left: 0; right: 0;
            background-color: rgba(243, 115, 33, 0.95);
            padding: 20px; padding-bottom: 30px;
            border-radius: 20px 20px 0 0; text-align: center; color: white; font-size: 18px; font-weight: 700;
            cursor: pointer; z-index: 100;
            box-shadow: 0 -4px 15px rgba(0,0,0,0.1);
            max-width: 450px; margin: 0 auto;
        }

        /* Common Inputs */
        .input-group { margin-bottom: 14px; }
        .input-group label { display: block; font-size: 13px; color: var(--sub-text-color); margin-bottom: 6px; }
        .input-group input, .input-group select { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #e5e7eb; font-size: 15px; background: #fff; }
        .btn.primary { background: var(--primary-color); color: #fff; border: none; padding: 14px; border-radius: 12px; width: 100%; font-weight: 700; cursor: pointer; box-shadow: 0 4px 12px rgba(243, 115, 33, 0.3); }
        .btn.primary:hover { opacity: 0.95; }
        .toast { position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%); background: #111; color: #fff; padding: 12px 18px; border-radius: 16px; font-size: 14px; display: none; z-index: 200; opacity: 0; transition: opacity 0.3s; box-shadow: 0 8px 20px rgba(0,0,0,0.2); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

<div class="app-shell">
    <div class="topbar">
        <div class="profile"></div>
        <div class="pill" onclick="showToast('ì•Œë¦¼ í˜ì´ì§€')"><i class="fas fa-bell"></i></div>
    </div>

    <section class="page active" id="page-home">
        <div class="card-container">
            <div class="gradient-card">
                <div>
                    <div class="label" style="opacity:0.8;">Hanwha Travel Card</div>
                    <div class="card-chip"></div>
                    <div class="card-number" style="margin-top:5px; font-size:18px; letter-spacing:1px;">0023 1234 5678 9000</div>
                </div>
                <div>
                    <div class="label" style="font-size:12px; opacity:0.8;">MEMBER SINCE 2024</div>
                    <div class="card-brand">
                        <div class="brand-circle red"></div>
                        <div class="brand-circle yellow"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="balance-area">
            <div class="currency">ì´ ì”ì•¡ (KRW)</div>
            <div class="amount" id="total-assets">â‚©5,000,000</div>
        </div>

        <div class="action-tray">
            <div class="action-btn-pill" data-target="page-transfer">
                <div class="icon"><i class="fas fa-paper-plane"></i></div>
                ì†¡ê¸ˆ
            </div>
            <div class="action-btn-pill" data-target="page-charge">
                <div class="icon"><i class="fas fa-plus"></i></div>
                ì¶©ì „
            </div>
            <div class="action-btn-pill" onclick="showToast('ìš”ì²­ ê¸°ëŠ¥ ì¤€ë¹„ì¤‘')">
                <div class="icon"><i class="fas fa-hand-holding-usd"></i></div>
                ìš”ì²­
            </div>
            <div class="action-btn-pill" data-target="page-remit">
                <div class="icon"><i class="fas fa-globe-asia"></i></div>
                í™˜ì „
            </div>
        </div>

        <div class="quick-actions-grid">
            <h3 style="font-size:17px; margin-bottom:15px;">ìì£¼ ì“°ëŠ” ê¸°ëŠ¥</h3>
            <div class="grid-4">
                <div class="action-card primary" data-target="page-history">
                    <div><i class="fas fa-receipt" style="font-size:24px;"></i></div>
                    <div style="font-size:14px; font-weight:600;">ì†Œë¹„ ë‚´ì—­</div>
                </div>
                <div class="action-card secondary" data-target="page-cards">
                    <div><i class="fas fa-bus" style="font-size:24px;"></i></div>
                    <div style="font-size:14px; font-weight:600;">êµí†µì¹´ë“œ</div>
                </div>
                <div class="action-card accent" onclick="showToast('ë¯¸ì…˜/í˜œíƒ í™•ì¸')">
                    <div><i class="fas fa-medal" style="font-size:24px;"></i></div>
                    <div style="font-size:14px; font-weight:600;">ë¯¸ì…˜ (5,000P)</div>
                </div>
                <div class="action-card info" onclick="showToast('ë¹„ì ê´€ë¦¬')">
                    <div><i class="fas fa-passport" style="font-size:24px;"></i></div>
                    <div style="font-size:14px; font-weight:600;">ë¹„ì ê´€ë¦¬</div>
                </div>
            </div>
        </div>
    </section>

    <section class="page" id="page-history">
        <a class="back-link" data-target="page-home"><i class="fas fa-arrow-left"></i> í™ˆìœ¼ë¡œ</a>
        
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2 style="margin:10px 0 20px;">ì´ìš© ë‚´ì—­</h2>
            <span style="font-size:14px; color:var(--primary-color); font-weight:600;">ì „ì²´ ë³´ê¸°</span>
        </div>

        <div class="history-month-header">6ì›” (JUNE)</div>

        <ul class="transaction-list">
            <li class="transaction-item">
                <div class="t-left">
                    <div class="t-avatar" style="background-image:url('https://randomuser.me/api/portraits/men/32.jpg')"></div>
                    <div class="t-info">
                        <span class="t-title">Mathias Bee</span>
                        <span class="t-date">29 Jul, 5:00pm</span>
                    </div>
                </div>
                <div class="t-right">
                    <span class="t-amount income">+ $400.00</span>
                    <span class="t-status">Received</span>
                </div>
            </li>
            <li class="transaction-item">
                <div class="t-left">
                    <div class="t-avatar" style="background-color:#000; color:#fff;"><i class="fab fa-uber"></i></div>
                    <div class="t-info">
                        <span class="t-title">Uber Ride</span>
                        <span class="t-date">24 Jul, 10:50pm</span>
                    </div>
                </div>
                <div class="t-right">
                    <span class="t-amount">- $20.00</span>
                    <span class="t-status">Sent</span>
                </div>
            </li>
            <li class="transaction-item">
                <div class="t-left">
                    <div class="t-avatar" style="background-color:#FCE4EC; color:#C2185B;">JD</div>
                    <div class="t-info">
                        <span class="t-title">John Doe</span>
                        <span class="t-date">30 Jun, 5:00am</span>
                    </div>
                </div>
                <div class="t-right">
                    <span class="t-amount income">+ $3,420.00</span>
                    <span class="t-status">Received</span>
                </div>
            </li>
            <li class="transaction-item">
                <div class="t-left">
                    <div class="t-avatar" style="background-color:#fff; border:1px solid #eee; color:#333;"><i class="fab fa-amazon"></i></div>
                    <div class="t-info">
                        <span class="t-title">Amazon</span>
                        <span class="t-date">26 Jun, 10:30am</span>
                    </div>
                </div>
                <div class="t-right">
                    <span class="t-amount">- $320.99</span>
                    <span class="t-status">Sent</span>
                </div>
            </li>
            <li class="transaction-item">
                <div class="t-left">
                    <div class="t-avatar" style="background-image:url('https://randomuser.me/api/portraits/women/44.jpg')"></div>
                    <div class="t-info">
                        <span class="t-title">Ayomide OA</span>
                        <span class="t-date">30 Jun, 8:20pm</span>
                    </div>
                </div>
                <div class="t-right">
                    <span class="t-amount">- $23.50</span>
                    <span class="t-status">Sent</span>
                </div>
            </li>
        </ul>
    </section>

    <section class="page" id="page-cards">
        <a class="back-link" data-target="page-home"><i class="fas fa-arrow-left"></i> í™ˆìœ¼ë¡œ</a>
        <h2 style="margin-top:0;">ë‚´ ì¹´ë“œ ê´€ë¦¬</h2>
        
        <div class="gradient-card" style="height:180px; margin-bottom:20px;">
            <div>
                <div class="label" style="opacity:0.8;">Hanwha Travel Card</div>
                <div class="card-chip"></div>
            </div>
            <div>
                 <div class="card-number" style="font-size:16px;">0023 1234 5678 9000</div>
                 <div class="card-brand" style="bottom:15px; right:15px;">
                    <div class="brand-circle red"></div>
                    <div class="brand-circle yellow"></div>
                </div>
            </div>
        </div>

        <div class="input-group">
            <label>ì¹´ë“œ ë³„ì¹­</label>
            <input type="text" value="ë©”ì¸ ì—¬í–‰ ì¹´ë“œ">
        </div>
        
        <div style="margin-top:20px;">
            <div style="padding:15px; border-bottom:1px solid #eee; display:flex; justify-content:space-between;">
                <span>í•´ì™¸ ê²°ì œ ì°¨ë‹¨</span>
                <i class="fas fa-toggle-off" style="font-size:24px; color:#ccc;"></i>
            </div>
            <div style="padding:15px; border-bottom:1px solid #eee; display:flex; justify-content:space-between;">
                <span>ì¹´ë“œ ë¶„ì‹¤ ì‹ ê³ </span>
                <i class="fas fa-chevron-right" style="color:#ccc;"></i>
            </div>
            <div style="padding:15px; border-bottom:1px solid #eee; display:flex; justify-content:space-between;">
                <span>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</span>
                <i class="fas fa-chevron-right" style="color:#ccc;"></i>
            </div>
        </div>
    </section>

    <section class="page" id="page-all">
        <a class="back-link" data-target="page-home"><i class="fas fa-arrow-left"></i> í™ˆìœ¼ë¡œ</a>
        <h2 style="margin-top:0;">ì „ì²´ ë©”ë‰´</h2>
        
        <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:15px; text-align:center; margin-top:30px;">
            <div style="padding:15px; background:#f9f9f9; border-radius:12px;">
                <i class="fas fa-user-cog" style="font-size:24px; color:#555; margin-bottom:8px;"></i>
                <div style="font-size:12px;">ë‚´ ì •ë³´</div>
            </div>
            <div style="padding:15px; background:#f9f9f9; border-radius:12px;">
                <i class="fas fa-shield-alt" style="font-size:24px; color:#555; margin-bottom:8px;"></i>
                <div style="font-size:12px;">ë³´ì•ˆ/ì¸ì¦</div>
            </div>
            <div style="padding:15px; background:#f9f9f9; border-radius:12px;">
                <i class="fas fa-bullhorn" style="font-size:24px; color:#555; margin-bottom:8px;"></i>
                <div style="font-size:12px;">ê³µì§€ì‚¬í•­</div>
            </div>
            <div style="padding:15px; background:#f9f9f9; border-radius:12px;">
                <i class="fas fa-headset" style="font-size:24px; color:#555; margin-bottom:8px;"></i>
                <div style="font-size:12px;">ê³ ê°ì„¼í„°</div>
            </div>
            <div style="padding:15px; background:#f9f9f9; border-radius:12px;">
                <i class="fas fa-cog" style="font-size:24px; color:#555; margin-bottom:8px;"></i>
                <div style="font-size:12px;">ì„¤ì •</div>
            </div>
        </div>
    </section>

    <section class="page" id="page-charge">
        <a class="back-link" data-target="page-home"><i class="fas fa-arrow-left"></i> í™ˆìœ¼ë¡œ</a>
        
        <div class="form-card">
            <h2 style="margin-top:0;">ì¶©ì „í•˜ê¸°</h2>
            <p style="color:var(--sub-text-color); margin-top:4px; margin-bottom:20px;">ì›í•˜ëŠ” í†µí™”ì™€ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>

            <div id="step1-area">
                <div class="currency-choice-grid">
                    <div class="currency-choice active" onclick="setCurrency('USD', this)" data-currency="USD">
                        <span style="font-size:18px;">ğŸ‡ºğŸ‡¸</span> USD
                    </div>
                    <div class="currency-choice" onclick="setCurrency('EUR', this)" data-currency="EUR">
                        <span style="font-size:18px;">ğŸ‡ªğŸ‡º</span> EUR
                    </div>
                    <div class="currency-choice" onclick="setCurrency('AUD', this)" data-currency="AUD">
                        <span style="font-size:18px;">ğŸ‡¦ğŸ‡º</span> AUD
                    </div>
                </div>

                <div class="dual-currency">
                    <div class="currency-box active-input">
                        <small>KRW (ì›í™”)</small>
                        <input id="charge-krw-input" type="number" inputmode="numeric" placeholder="10,000 ì´ìƒ" oninput="calculateFromKrw(this.value)">
                    </div>
                    <div class="swap-arrow"><i class="fas fa-exchange-alt"></i></div>
                    <div class="currency-box">
                        <small id="local-currency-label">USD (í˜„ì§€ í†µí™”)</small>
                        <input id="charge-local-input" type="text" placeholder="0.00" readonly>
                    </div>
                </div>

                <div class="money-grid">
                    <button class="money-btn" onclick="addMoney(10000)">+1ë§Œ</button>
                    <button class="money-btn" onclick="addMoney(30000)">+3ë§Œ</button>
                    <button class="money-btn" onclick="addMoney(50000)">+5ë§Œ</button>
                    <button class="money-btn" onclick="addMoney(100000)">+10ë§Œ</button>
                    <button class="money-btn" onclick="addMoney(500000)">+50ë§Œ</button>
                    <button class="money-btn" onclick="addMoney(1000000)">+100ë§Œ</button>
                </div>

                <div class="action-row" id="charge-action-row">
                    <button class="btn-reset" onclick="resetCharge()">ì´ˆê¸°í™”</button>
                    <button class="btn-next" onclick="goNextStep()">ë‹¤ìŒ</button>
                </div>
            </div>

            <div id="step2-area" class="hidden">
                <div style="height:1px; background:#eee; margin:25px 0;"></div>
                
                <div class="payment-section">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                        <span class="section-title" style="margin:0;">ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ</span>
                        <span onclick="resetCharge()" style="font-size:13px; color:#999; text-decoration:underline; cursor:pointer;">ê¸ˆì•¡ ì¬ì„¤ì •</span>
                    </div>

                    <div class="payment-option" onclick="selectMethod(this, 'cash')">
                        <div class="radio-circle"></div> 
                        <span><i class="fas fa-store" style="color:var(--primary-color); margin-right:8px;"></i>í¸ì˜ì  (í˜„ê¸ˆ)</span>
                    </div>
                    <div id="barcode-detail" class="detail-box">
                        <div style="font-weight:700; margin-bottom:6px; text-align:center;">í¸ì˜ì  ì¶©ì „ìš© ë°”ì½”ë“œ</div>
                        <div style="text-align:center;">
                            <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='260' height='80'><rect width='260' height='80' fill='white'/><g stroke='black' stroke-width='6'><line x1='15' y1='10' x2='15' y2='70'/><line x1='35' y1='10' x2='35' y2='70'/><line x1='55' y1='10' x2='55' y2='70'/><line x1='80' y1='10' x2='80' y2='70'/><line x1='100' y1='10' x2='100' y2='70'/><line x1='120' y1='10' x2='120' y2='70'/><line x1='145' y1='10' x2='145' y2='70'/><line x1='165' y1='10' x2='165' y2='70'/><line x1='185' y1='10' x2='185' y2='70'/><line x1='205' y1='10' x2='205' y2='70'/><line x1='225' y1='10' x2='225' y2='70'/></g><text x='130' y='60' text-anchor='middle' font-family='monospace' font-size='14'>HANWHA CHARGE</text></svg>" alt="barcode" style="width:100%; max-width:250px; height:auto;">
                        </div>
                        <div style="margin-top:6px; color:var(--sub-text-color); font-size:12px; text-align:center;">ì ì›ì—ê²Œ ì´ ë°”ì½”ë“œë¥¼ ë³´ì—¬ì£¼ì„¸ìš”.</div>
                    </div>

                    <div class="payment-option" onclick="selectMethod(this, 'card')">
                        <div class="radio-circle"></div> 
                        <span><i class="fas fa-credit-card" style="color:var(--primary-color); margin-right:8px;"></i>ì‹ ìš©ì¹´ë“œ / ì²´í¬ì¹´ë“œ</span>
                    </div>
                    
                    <div id="card-detail" class="detail-box">
                        <p style="font-size:13px; color:#666; margin-bottom:10px;">ì‚¬ìš©í•  ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
                        <div class="saved-card-list">
                            <label class="saved-card-item" onclick="toggleCardMode('saved')">
                                <input type="radio" name="card_select" value="9334" checked>
                                <div>
                                    <div class="saved-card-info">Mastercard **** 9334</div>
                                    <div class="saved-card-sub">ë²•ì¸ì¹´ë“œ (ì¼ì‹œë¶ˆ)</div>
                                </div>
                            </label>
                            <label class="saved-card-item" onclick="toggleCardMode('saved')">
                                <input type="radio" name="card_select" value="8665">
                                <div>
                                    <div class="saved-card-info">Visa **** 8665</div>
                                    <div class="saved-card-sub">ê°œì¸ì¹´ë“œ</div>
                                </div>
                            </label>
                            <label class="saved-card-item" onclick="toggleCardMode('new')">
                                <input type="radio" name="card_select" value="new">
                                <div>
                                    <div class="saved-card-info" style="color:var(--primary-color);">+ ìƒˆ ì¹´ë“œ ë“±ë¡</div>
                                </div>
                            </label>
                        </div>
                        <div id="new-card-form" style="margin-top:15px; border-top:1px dashed #ddd; padding-top:15px; display:none;">
                            <div class="input-group">
                                <label>ì¹´ë“œ ë²ˆí˜¸</label>
                                <input type="text" placeholder="0000 0000 0000 0000" inputmode="numeric" maxlength="19">
                            </div>
                            <div style="display:flex; gap:10px;">
                                <div class="input-group" style="flex:1;">
                                    <label>ìœ íš¨ê¸°ê°„ (MM/YY)</label>
                                    <input type="text" placeholder="12/25" maxlength="5">
                                </div>
                                <div class="input-group" style="flex:1;">
                                    <label>CVC</label>
                                    <input type="password" placeholder="***" maxlength="3" inputmode="numeric">
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

    <section class="page" id="page-transfer">
        <a class="back-link" data-target="page-home"><i class="fas fa-arrow-left"></i> í™ˆìœ¼ë¡œ</a>
        
        <div class="form-card">
            <h2 style="margin-top:0; margin-bottom:20px;">ì†¡ê¸ˆí•˜ê¸°</h2>
            
            <div id="transfer-step-1">
                <input type="text" class="transfer-search" placeholder="ê³„ì¢Œë²ˆí˜¸ë‚˜ ì´ë¦„ ì…ë ¥">
                
                <h3 style="font-size:15px; margin-bottom:15px; color:#555;">ìµœê·¼ ë³´ë‚¸ ë¶„</h3>
                
                <ul class="recipient-list">
                    <li class="recipient-item" onclick="selectRecipient('Ryan', 'Nexus Friend')">
                        <div class="recipient-avatar">R <span class="badge-nexus">N</span></div>
                        <div class="recipient-info">
                            <div class="recipient-name">Ryan</div>
                            <div class="recipient-detail">Nexus Friend</div>
                        </div>
                        <i class="fas fa-chevron-right" style="color:#ddd;"></i>
                    </li>
                    <li class="recipient-item" onclick="selectRecipient('Bailey', 'Nexus Friend')">
                        <div class="recipient-avatar" style="background:#e3f2fd; color:#1565c0;">B <span class="badge-nexus">N</span></div>
                        <div class="recipient-info">
                            <div class="recipient-name">Bailey</div>
                            <div class="recipient-detail">Nexus Friend</div>
                        </div>
                        <i class="fas fa-chevron-right" style="color:#ddd;"></i>
                    </li>
                    <li class="recipient-item" onclick="selectRecipient('Michael', 'Nexus Friend')">
                        <div class="recipient-avatar" style="background:#f3e5f5; color:#7b1fa2;">M <span class="badge-nexus">N</span></div>
                        <div class="recipient-info">
                            <div class="recipient-name">Michael</div>
                            <div class="recipient-detail">Nexus Friend</div>
                        </div>
                        <i class="fas fa-chevron-right" style="color:#ddd;"></i>
                    </li>
                    <li class="recipient-item" onclick="selectRecipient('Leah', 'Nexus Friend')">
                        <div class="recipient-avatar" style="background:#e8f5e9; color:#2e7d32;">L <span class="badge-nexus">N</span></div>
                        <div class="recipient-info">
                            <div class="recipient-name">Leah</div>
                            <div class="recipient-detail">Nexus Friend</div>
                        </div>
                        <i class="fas fa-chevron-right" style="color:#ddd;"></i>
                    </li>
                    
                    <li class="recipient-item" onclick="selectRecipient('í™ê¸¸ë™', 'í•˜ë‚˜ì€í–‰ 715-***')">
                        <div class="recipient-avatar" style="background:#009490; color:white;">í™</div>
                        <div class="recipient-info">
                            <div class="recipient-name">í™ê¸¸ë™</div>
                            <div class="recipient-detail">í•˜ë‚˜ì€í–‰ 71500000000000</div>
                        </div>
                        <i class="fas fa-chevron-right" style="color:#ddd;"></i>
                    </li>
                </ul>
            </div>

            <div id="transfer-step-2" class="hidden">
                <div style="background:#f9f9f9; padding:15px; border-radius:12px; margin-bottom:20px; text-align:center;">
                    <div style="font-size:14px; color:#888;">ë°›ëŠ” ë¶„</div>
                    <div id="selected-recipient-name" style="font-size:18px; font-weight:700; color:#333; margin-top:5px;"></div>
                    <div id="selected-recipient-info" style="font-size:13px; color:#666;"></div>
                </div>

                <div style="margin-bottom:6px; font-size:14px; color:#666; text-align:center;">ë³´ë‚¼ ê¸ˆì•¡</div>
                
                <div class="big-money-input-wrapper">
                    <input type="number" id="transfer-amount" class="big-money-input" placeholder="0" inputmode="numeric">
                </div>
                
                <div style="display:flex; gap:10px; margin-top:20px;">
                    <button class="btn" style="flex:1; background:#eee; color:#333;" onclick="resetTransfer()">ì·¨ì†Œ</button>
                    <button class="btn primary" style="flex:2;" onclick="submitTransfer()">ë³´ë‚´ê¸°</button>
                </div>
            </div>

        </div>
    </section>

    <section class="page" id="page-password">
        <div style="text-align:right; padding-bottom:10px;">
            <span onclick="cancelPassword()" style="font-size:14px; color:#888; cursor:pointer;">ì·¨ì†Œ</span>
        </div>

        <div class="pin-container">
            <div class="pin-message" id="pin-message-text">
                í™ê¸¸ë™ë‹˜ê»˜<br>50,000KRWë¥¼ ì†¡ê¸ˆí•©ë‹ˆë‹¤.
            </div>

            <div class="pin-display" id="pin-display">
                <div class="pin-dot"></div>
                <div class="pin-dot"></div>
                <div class="pin-dot"></div>
                <div class="pin-dot"></div>
                <div class="pin-dot"></div>
                <div class="pin-dot"></div>
            </div>

            <div class="num-pad">
                <div class="num-key" onclick="onKeyClick(1)">1</div>
                <div class="num-key" onclick="onKeyClick(2)">2</div>
                <div class="num-key" onclick="onKeyClick(3)">3</div>
                <div class="num-key" onclick="onKeyClick(4)">4</div>
                <div class="num-key" onclick="onKeyClick(5)">5</div>
                <div class="num-key" onclick="onKeyClick(6)">6</div>
                <div class="num-key" onclick="onKeyClick(7)">7</div>
                <div class="num-key" onclick="onKeyClick(8)">8</div>
                <div class="num-key" onclick="onKeyClick(9)">9</div>
                <div class="num-key empty"></div>
                <div class="num-key" onclick="onKeyClick(0)">0</div>
                <div class="num-key" onclick="onDeleteClick()"><i class="fas fa-backspace"></i></div>
            </div>
        </div>
    </section>

    <section class="page" id="page-success">
        <div class="success-container">
            <div class="success-icon"><i class="fas fa-check"></i></div>
            <div class="success-title" id="success-title">ì†¡ê¸ˆ ì™„ë£Œ!</div>
            <div class="success-desc" id="success-desc">ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.</div>

            <div class="success-btns">
                <button class="btn-share" onclick="shareTransaction()"><i class="fas fa-share-alt"></i> ê³µìœ í•˜ê¸°</button>
                <button class="btn-complete" onclick="finishTransaction()">ì™„ë£Œ</button>
            </div>
        </div>
    </section>

    <section class="page" id="page-remit">
        <a class="back-link" data-target="page-home"><i class="fas fa-arrow-left"></i> í™ˆìœ¼ë¡œ</a>
        <div class="form-card">
            <h2 style="margin-top:0;">í™˜ì „ ë° í•´ì™¸ ì†¡ê¸ˆ</h2>
            <p style="color:var(--sub-text-color); margin-top:4px;">ì‹¤ì‹œê°„ í™˜ìœ¨ì´ ì ìš©ë˜ë©° ìˆ˜ìˆ˜ë£Œê°€ ë¶€ê³¼ë©ë‹ˆë‹¤.</p>
            <div class="input-group">
                <label for="remit-amount">ë³´ë‚¼ ê¸ˆì•¡ (â‚©)</label>
                <input type="number" id="remit-amount" min="0" inputmode="numeric" placeholder="ì˜ˆ: 100000">
            </div>
            <div class="input-group">
                <label for="remit-currency">ë°›ì„ í†µí™”</label>
                <select id="remit-currency">
                    <option value="USD">USD (ë¯¸êµ­ ë‹¬ëŸ¬)</option>
                    <option value="EUR">EUR (ìœ ë¡œ)</option>
                    <option value="JPY">JPY (ì¼ë³¸ ì—”)</option>
                </select>
            </div>
            <button class="btn primary" onclick="submitRemit()"><i class="fas fa-globe"></i> ì†¡ê¸ˆí•˜ê¸°</button>
        </div>
    </section>

</div> 

<div class="bottom-nav">
    <div class="nav-item active" data-target="page-home"><i class="fas fa-home"></i> í™ˆ</div>
    <div class="nav-item" data-target="page-history"><i class="fas fa-list-alt"></i> ë‚´ì—­</div>
    <div class="nav-item" data-target="page-cards"><i class="fas fa-credit-card"></i> ì¹´ë“œ</div>
    <div class="nav-item" data-target="page-all"><i class="fas fa-bars"></i> ì „ì²´</div>
</div>

<div id="charge-bottom-bar" class="bottom-floating-bar hidden" onclick="finalCharge()">
    <span id="bottom-charge-amount">0</span>ì› ì¶©ì „í•˜ê¸°
</div>

<div class="toast" id="toast"></div>

<script>
    // ==========================================
    // ì•± ë°ì´í„° ë° ìƒíƒœ ê´€ë¦¬
    // ==========================================
    const state = {
        totalAssetsKRW: 5000000, 
    };
    
    const exchangeRates = { 
        USD: 1300, 
        EUR: 1400, 
        AUD: 850,
        JPY: 900 
    };

    let transactionContext = {
        type: '', 
        amount: 0,
        recipient: '',
    };
    
    let currentPin = "";

    function renderBalance() {
        document.getElementById('total-assets').innerText = 'â‚©' + state.totalAssetsKRW.toLocaleString();
    }

    // ==========================================
    // ë„¤ë¹„ê²Œì´ì…˜ ë¡œì§
    // ==========================================
    function navigate(targetId) {
        // ëª¨ë“  í˜ì´ì§€ ìˆ¨ê¹€
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        
        // íƒ€ê²Ÿ í˜ì´ì§€ í‘œì‹œ
        const targetPage = document.getElementById(targetId);
        if(targetPage) targetPage.classList.add('active');
        
        // í•˜ë‹¨ ë‚´ë¹„ê²Œì´ì…˜ ë°” ì œì–´: í™ˆì¼ ë•Œë§Œ ë³´ì´ê³  ë‚˜ë¨¸ì§€ëŠ” ìˆ¨ê¹€ (ìš”ì²­ì‚¬í•­ ë°˜ì˜)
        const bottomNav = document.querySelector('.bottom-nav');
        if (targetId === 'page-home') {
            bottomNav.classList.remove('hidden');
        } else {
            bottomNav.classList.add('hidden');
        }

        // íƒ­ ìƒíƒœ ì—…ë°ì´íŠ¸
        document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
        const activeNav = document.querySelector(`.nav-item[data-target="${targetId}"]`);
        if (activeNav) activeNav.classList.add('active');
        
        // í˜ì´ì§€ë³„ ì´ˆê¸°í™”
        if (targetId === 'page-charge') resetCharge();
        if (targetId === 'page-transfer') resetTransfer();
        
        // í”Œë¡œíŒ…ë°” ìˆ¨ê¹€ (ì¶©ì „ í˜ì´ì§€ í¬í•¨ ëª¨ë“  í˜ì´ì§€ ì§„ì… ì‹œ ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€)
        document.getElementById('charge-bottom-bar').classList.add('hidden');

        window.scrollTo(0,0);
    }

    function showToast(msg) {
        const t = document.getElementById('toast');
        t.innerText = msg;
        t.style.display = 'block';
        setTimeout(() => t.style.opacity = 1, 10);
        setTimeout(() => {
            t.style.opacity = 0;
            setTimeout(() => t.style.display = 'none', 300);
        }, 2000);
    }

    // ==========================================
    // ë¹„ë°€ë²ˆí˜¸(PIN) ë¡œì§
    // ==========================================
    function startPasswordFlow(type, amount, recipientName) {
        transactionContext = { type, amount, recipient: recipientName };
        currentPin = "";
        updatePinDisplay();

        const msgEl = document.getElementById('pin-message-text');
        if (type === 'transfer') {
            msgEl.innerHTML = `${recipientName}ë‹˜ê»˜<br>${amount.toLocaleString()}KRWë¥¼ ì†¡ê¸ˆí•©ë‹ˆë‹¤.`;
        } else {
            msgEl.innerHTML = `${amount.toLocaleString()}KRWë¥¼<br>ì¶©ì „í•©ë‹ˆë‹¤.`;
        }
        navigate('page-password');
    }

    function onKeyClick(num) {
        if (currentPin.length < 6) {
            currentPin += num;
            updatePinDisplay();
            
            if (currentPin.length === 6) {
                setTimeout(checkPin, 200);
            }
        }
    }

    function onDeleteClick() {
        if (currentPin.length > 0) {
            currentPin = currentPin.slice(0, -1);
            updatePinDisplay();
        }
    }

    function updatePinDisplay() {
        const dots = document.querySelectorAll('.pin-dot');
        dots.forEach((dot, idx) => {
            if (idx < currentPin.length) dot.classList.add('filled');
            else dot.classList.remove('filled');
        });
    }

    function checkPin() {
        showSuccessPage();
    }

    function cancelPassword() {
        navigate('page-home');
    }

    // ==========================================
    // ì™„ë£Œ(Success) ë¡œì§
    // ==========================================
    function showSuccessPage() {
        const { type, amount, recipient } = transactionContext;
        const titleEl = document.getElementById('success-title');
        const descEl = document.getElementById('success-desc');

        if (type === 'transfer') {
            titleEl.innerText = "ì†¡ê¸ˆ ì™„ë£Œ!";
            descEl.innerText = `${recipient}ë‹˜ê»˜ ${amount.toLocaleString()}ì› ì†¡ê¸ˆë¨`;
            state.totalAssetsKRW -= amount;
        } else {
            titleEl.innerText = "ì¶©ì „ ì™„ë£Œ!";
            descEl.innerText = `${amount.toLocaleString()}ì› ì¶©ì „ ì™„ë£Œ`;
            state.totalAssetsKRW += amount;
        }
        renderBalance();
        navigate('page-success');
    }

    function shareTransaction() {
        const { type, amount, recipient } = transactionContext;
        let msg = "";
        if (type === 'transfer') msg = `${recipient}ë‹˜ì—ê²Œ ${amount.toLocaleString()}ì› ì†¡ê¸ˆ ì™„ë£Œ!`;
        else msg = `${amount.toLocaleString()}ì› ì¶©ì „ ì™„ë£Œ!`;
        alert(`[ê³µìœ  ë©”ì‹œì§€ ì „ì†¡]\n${msg}`);
    }

    function finishTransaction() {
        navigate('page-home');
    }

    // ==========================================
    // ì†¡ê¸ˆí•˜ê¸° ë¡œì§
    // ==========================================
    function selectRecipient(name, info) {
        document.getElementById('selected-recipient-name').innerText = name;
        document.getElementById('selected-recipient-info').innerText = info;
        document.getElementById('transfer-step-1').classList.add('hidden');
        document.getElementById('transfer-step-2').classList.remove('hidden');
        document.getElementById('transfer-amount').focus();
    }

    function resetTransfer() {
        document.getElementById('transfer-amount').value = '';
        document.getElementById('transfer-step-1').classList.remove('hidden');
        document.getElementById('transfer-step-2').classList.add('hidden');
    }

    function submitTransfer() {
        const val = parseInt(document.getElementById('transfer-amount').value) || 0;
        const name = document.getElementById('selected-recipient-name').innerText;
        
        if(val <= 0) return showToast('ê¸ˆì•¡ì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”');
        if(val > state.totalAssetsKRW) return showToast('ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤');
        
        startPasswordFlow('transfer', val, name);
    }

    // ==========================================
    // ì¶©ì „í•˜ê¸° ë¡œì§
    // ==========================================
    let chargeAmount = 0;
    let selectedCurrency = 'USD';
    let selectedMethod = null;

    function setCurrency(code, el) {
        if(document.getElementById('step1-area').classList.contains('disabled-area')) return;
        selectedCurrency = code;
        document.querySelectorAll('.currency-choice').forEach(c => c.classList.remove('active'));
        el.classList.add('active');
        document.getElementById('local-currency-label').innerText = `${code} (í˜„ì§€ í†µí™”)`;
        calculateFromKrw(document.getElementById('charge-krw-input').value);
    }

    function addMoney(val) {
        if(document.getElementById('step1-area').classList.contains('disabled-area')) return;
        let currentVal = parseInt(document.getElementById('charge-krw-input').value) || 0;
        let newVal = currentVal + val;
        document.getElementById('charge-krw-input').value = newVal;
        calculateFromKrw(newVal);
    }

    function calculateFromKrw(val) {
        chargeAmount = parseInt(val) || 0;
        const rate = exchangeRates[selectedCurrency] || 1300;
        const localVal = chargeAmount / rate;
        document.getElementById('charge-local-input').value = localVal > 0 ? localVal.toFixed(2) : '';
        document.getElementById('bottom-charge-amount').innerText = chargeAmount.toLocaleString();
    }

    function resetCharge() {
        chargeAmount = 0;
        selectedMethod = null;
        document.getElementById('charge-krw-input').value = '';
        calculateFromKrw(0);
        document.getElementById('step1-area').classList.remove('disabled-area');
        document.getElementById('charge-action-row').style.display = 'flex';
        document.getElementById('step2-area').classList.add('hidden');
        document.getElementById('charge-bottom-bar').classList.add('hidden');
        document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('selected'));
        document.querySelectorAll('.detail-box').forEach(box => box.classList.remove('show'));
    }

    function goNextStep() {
        if (chargeAmount < 10000) {
            alert('ìµœì†Œ 10,000ì› ì´ìƒ ì¶©ì „ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
            return;
        }
        document.getElementById('step1-area').classList.add('disabled-area');
        document.getElementById('charge-action-row').style.display = 'none';
        document.getElementById('step2-area').classList.remove('hidden');
        document.getElementById('charge-bottom-bar').classList.remove('hidden');
    }

    function selectMethod(el, methodKey) {
        document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('selected'));
        document.querySelectorAll('.detail-box').forEach(box => box.classList.remove('show'));
        el.classList.add('selected');
        selectedMethod = methodKey;
        if (methodKey === 'cash') document.getElementById('barcode-detail').classList.add('show');
        else if (methodKey === 'card') {
            document.getElementById('card-detail').classList.add('show');
            document.querySelector('input[name="card_select"][value="9334"]').checked = true;
            toggleCardMode('saved');
        }
    }

    function toggleCardMode(mode) {
        const newCardForm = document.getElementById('new-card-form');
        newCardForm.style.display = (mode === 'new') ? 'block' : 'none';
    }

    function finalCharge() {
        if (!selectedMethod) return showToast('ê²°ì œ ìˆ˜ë‹¨ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        if (selectedMethod === 'card') {
            const cardSelection = document.querySelector('input[name="card_select"]:checked').value;
            if (cardSelection === 'new') {
                const inputs = document.querySelectorAll('#new-card-form input');
                for(let input of inputs) if(!input.value) return alert('ì¹´ë“œ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            }
        }
        startPasswordFlow('charge', chargeAmount, 'ë‚´ ì§€ê°‘');
    }

    function submitRemit() {
        const val = parseInt(document.getElementById('remit-amount').value) || 0;
        if(val <= 0) return showToast('ê¸ˆì•¡ì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”');
        if(val > state.totalAssetsKRW) return showToast('ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤');

        state.totalAssetsKRW -= val;
        renderBalance();
        showToast('í™˜ì „ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
        document.getElementById('remit-amount').value = '';
        navigate('page-home');
    }

    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('[data-target]').forEach(el => {
            el.addEventListener('click', (e) => {
                const target = el.dataset.target;
                navigate(target);
            });
        });
        resetCharge();
        renderBalance();
    });

</script>

</body>
</html>